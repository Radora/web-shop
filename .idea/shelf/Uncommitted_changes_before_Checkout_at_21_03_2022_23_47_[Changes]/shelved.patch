Index: pages/products_administration.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\"/>\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"/>\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"/>\r\n    <link\r\n            href=\"../css/bootstrap.min.css\"\r\n            rel=\"stylesheet\"\r\n    />\r\n\r\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\">\r\n\r\n    <link rel=\"stylesheet\" href=\"../css/style.css\"/>\r\n    <title>Product Administration</title>\r\n</head>\r\n\r\n<body>\r\n\r\n<!-- Navbar -->\r\n<nav class=\"navbar navbar-expand-md bg-dark navbar-dark py-3 fixed-top\">\r\n    <div class=\"container\">\r\n        <a href=\"index.html\" class=\"navbar-brand\">Matt & Rado</a>\r\n\r\n        <button\r\n                class=\"navbar-toggler\"\r\n                type=\"button\"\r\n                data-bs-toggle=\"collapse\"\r\n                data-bs-target=\"#navmenu\"\r\n        >\r\n            <span class=\"navbar-toggler-icon\"></span>\r\n        </button>\r\n\r\n        <div class=\"collapse navbar-collapse\" id=\"navmenu\"></div>\r\n    </div>\r\n</nav>\r\n<!-- Navbar end -->\r\n\r\n<!-- Register -->\r\n<div class=\"container mt-5\">\r\n    <div class=\"row\">\r\n        <div class=\"col-12 col-lg-6\">\r\n            <div class=\"form-signin\">\r\n                <form>\r\n                    <h1 class=\"h1 my-4 fw-normal\">Add New Product</h1>\r\n                    <button id=\"save_products_edits\" type=\"button\" class=\"btn-edit-product btn btn-outline-info ms-3 ms-md-5\">\r\n                            Save\r\n                    </button>\r\n                    <div class=\"form-floating my-1\">\r\n                        <input type=\"text\" class=\"form-control\" id=\"product_edit_id\" placeholder=\"ID\" disabled>\r\n                        <label for=\"product_edit_id\">ID</label>\r\n                    </div>\r\n                    <div class=\"form-floating my-1\">\r\n                        <input type=\"text\" class=\"form-control\" id=\"new_product_title\" placeholder=\"Name/Title\">\r\n                        <label for=\"new_product_title\">Name/Title</label>\r\n                    </div>\r\n                    <div class=\"form-floating my-1\">\r\n                        <input type=\"text\" class=\"form-control\" id=\"new_product_desc\" placeholder=\"Description\">\r\n                        <label for=\"new_product_desc\">Description</label>\r\n                    </div>\r\n                    <div action=\"#\" class=\"my-4\">\r\n                        <label>Choose category:</label>\r\n\r\n                        <select name=\"categories\" id=\"new_product_cat\">\r\n                            <option value=\"Smartphones\">Smartphones</option>\r\n                            <option value=\"Laptops\">Laptops</option>\r\n                            <option value=\"Desktops\">Desktops</option>\r\n                        </select>\r\n\r\n                    </div>\r\n                    <div class=\"product-image mb-4\">\r\n                        <label for=\"avatar\">Choose picture:</label>\r\n                        <input type=\"file\" class=\"text-center\"\r\n                               id=\"avatar\" name=\"avatar\"\r\n                               accept=\"image/png, image/jpeg\">\r\n                    </div>\r\n                    <div class=\"form-floating my-1\">\r\n                        <input type=\"number\" class=\"form-control\" id=\"new_product_price\" placeholder=\"Price\">\r\n                        <label for=\"new_product_price\">Price</label>\r\n                    </div>\r\n                    <div class=\"form-floating my-1\">\r\n                        <input type=\"number\" class=\"form-control\" id=\"new_product_stock\" placeholder=\"Stock\">\r\n                        <label for=\"new_product_stock\">Stock</label>\r\n                    </div>\r\n\r\n                    <button id=\"add_new_product_btn\" class=\"w-100 btn btn-lg btn-primary\" type=\"button\">Add</button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n        <!--********************************************************************************-->\r\n        <div class=\"col-12 col-lg-6\">\r\n            <div class=\"manage-products-table row justify-content-center text-white\">\r\n                <div class=\"col-auto table-responsive\">\r\n                    <h1 class=\"\">Manage product</h1>\r\n\r\n                    <table id=\"edit_products_table\" class=\"table table-hover text-start text-white bg-secondary\">\r\n                        <thead>\r\n                        <tr>\r\n                            <th scope=\"col\">ID</th>\r\n                            <th scope=\"col\">Title/Name</th>\r\n                            <th scope=\"col\">Price</th>\r\n                            <th scope=\"col\">Stock</th>\r\n                            <th scope=\"col\">Category</th>\r\n                            <th colspan=\"2\" scope=\"col\" class=\"text-center\">Actions</th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody class=\"edit_products_table_body\"></tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\r\n<!-- Register end -->\r\n\r\n<!-- Footer -->\r\n<footer id=\"footer\"></footer>\r\n\r\n<script src=\"http://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js\"></script>\r\n<script src=\"../js/bootstrap.min.js\"></script>\r\n<script src=\"../js/main.js\"></script>\r\n<script src=\"../js/product-logic.js\"></script>\r\n<script src=\"../js/admin-page-products.js\"></script>\r\n</body>\r\n</html>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/pages/products_administration.html b/pages/products_administration.html
--- a/pages/products_administration.html	(revision 347b39de87260b71825275374961bced833dfb26)
+++ b/pages/products_administration.html	(date 1647899714673)
@@ -41,7 +41,7 @@
     <div class="row">
         <div class="col-12 col-lg-6">
             <div class="form-signin">
-                <form>
+                <form enctype="multipart/form-data">
                     <h1 class="h1 my-4 fw-normal">Add New Product</h1>
                     <button id="save_products_edits" type="button" class="btn-edit-product btn btn-outline-info ms-3 ms-md-5">
                             Save
@@ -66,14 +66,13 @@
                             <option value="Laptops">Laptops</option>
                             <option value="Desktops">Desktops</option>
                         </select>
-
                     </div>
-                    <div class="product-image mb-4">
-                        <label for="avatar">Choose picture:</label>
-                        <input type="file" class="text-center"
-                               id="avatar" name="avatar"
-                               accept="image/png, image/jpeg">
-                    </div>
+                        <div class="product-image mb-4">
+                            <label for="new_product_imgRef">Choose picture:</label>
+                            <input type="file" class="text-center"
+                                   id="new_product_imgRef" name="avatar"
+                                   accept="image/png, image/jpeg">
+                        </div>
                     <div class="form-floating my-1">
                         <input type="number" class="form-control" id="new_product_price" placeholder="Price">
                         <label for="new_product_price">Price</label>
Index: js/product-logic.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>$(document).ready(function () {\r\n\r\n\r\n    $('#add_new_product_btn').click(AddNewProduct);\r\n\r\n    function AddNewProduct() {\r\n        const name = $('#new_product_title').val();\r\n        const description = $('#new_product_desc').val();\r\n        const price = $('#new_product_price').val();\r\n        const onStock = $('#new_product_stock').val();\r\n        const productCategoryName = $('#new_product_cat').val();\r\n        var productCategoryID;\r\n\r\n\r\n        if (productCategoryName === 'Laptops') {\r\n            productCategoryID = 2;\r\n        } else if (productCategoryName === 'Smartphones') {\r\n            productCategoryID = 1;\r\n        } else if (productCategoryName === 'Desktops') {\r\n            productCategoryID = 3;\r\n        }\r\n\r\n        var newProductObject = new Object();\r\n\r\n        newProductObject.name = name;\r\n        newProductObject.description = description;\r\n        newProductObject.price = parseInt(price);\r\n        newProductObject.product_stock = parseInt(onStock);\r\n        newProductObject.category = productCategoryName;\r\n\r\n        var productJSON = JSON.stringify(newProductObject);\r\n\r\n        console.log(productJSON);\r\n\r\n        var jsonTest = ' {\"category\" : { \"id\" : 1, \"name\" : \"Smartphones\"}, \"name\" : \"Iphone 16\", \"description\" : \"Description\", \"price\" : 500 , \"product_stock\" : 10}';\r\n\r\n        var request = $.ajax({\r\n            method: 'POST',\r\n            url: 'http://localhost:8080/products/new',\r\n            xhrFields:{\r\n                withCredentials:true\r\n            },\r\n            data: productJSON,\r\n            headers: {\r\n                //Authorization: 'application/json'\r\n                'Content-Type': 'application/json',\r\n            }\r\n        });\r\n\r\n        request.done(function (msg) {\r\n            location.reload();\r\n        });\r\n\r\n        request.fail(function (jqXHR, textStatus) {\r\n            alert(\"Request failed: \" + textStatus);\r\n        });\r\n\r\n\r\n    }\r\n\r\n})\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/js/product-logic.js b/js/product-logic.js
--- a/js/product-logic.js	(revision 347b39de87260b71825275374961bced833dfb26)
+++ b/js/product-logic.js	(date 1647902818240)
@@ -3,12 +3,14 @@
 
     $('#add_new_product_btn').click(AddNewProduct);
 
+
     function AddNewProduct() {
         const name = $('#new_product_title').val();
         const description = $('#new_product_desc').val();
         const price = $('#new_product_price').val();
         const onStock = $('#new_product_stock').val();
         const productCategoryName = $('#new_product_cat').val();
+        const imgRef = $('#new_product_imgRef').val();
         var productCategoryID;
 
 
@@ -27,6 +29,7 @@
         newProductObject.price = parseInt(price);
         newProductObject.product_stock = parseInt(onStock);
         newProductObject.category = productCategoryName;
+        newProductObject.imgRef = imgRef;
 
         var productJSON = JSON.stringify(newProductObject);
 
@@ -34,28 +37,47 @@
 
         var jsonTest = ' {"category" : { "id" : 1, "name" : "Smartphones"}, "name" : "Iphone 16", "description" : "Description", "price" : 500 , "product_stock" : 10}';
 
+        let imgRef = $('#new_product_imgRef').val();
+
         var request = $.ajax({
             method: 'POST',
-            url: 'http://localhost:8080/products/new',
-            xhrFields:{
-                withCredentials:true
-            },
-            data: productJSON,
-            headers: {
-                //Authorization: 'application/json'
-                'Content-Type': 'application/json',
-            }
-        });
-
-        request.done(function (msg) {
+            url: 'http://localhost:8080/uploadFile',
+            xhrFields:{
+                withCredentials:true
+            },
+            data: productJSON,
+            processData: false,
+            contentType: false,
+            cache:false,
+            success: function (data){
+                console.log(data.fileDownloadUri);
+                imgRef = data.fileDownloadUri;
+            }
+        });
+
+
+        request.done(function (msg) {
+
+            $.ajax({
+                method: 'POST',
+                url: 'http://localhost:8080/products/new',
+                xhrFields:{
+                    withCredentials:true
+                },
+                data: productJSON,
+                headers: {
+                    //Authorization: 'application/json'
+                    'Content-Type': 'application/json',
+                }
+            });
             location.reload();
         });
 
         request.fail(function (jqXHR, textStatus) {
             alert("Request failed: " + textStatus);
         });
+    }
 
 
-    }
 
 })
